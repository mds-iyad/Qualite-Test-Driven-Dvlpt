if (typeof localStorage === "undefined" || localStorage === null) {
  var LocalStorage = require('node-localstorage').LocalStorage;
  localStorage = new LocalStorage('./scratch');
}

let get_JSON = (name) => {
  if (name != '' || name != undefined) {
    return (JSON.parse(localStorage.getItem(name)) ? JSON.parse(localStorage.getItem(name)) : null);
  } else {
    throw new Error("Key not found");
  }
};

let get_plain = (name) => {
  if (name != '' || name != undefined) {
    return (localStorage.getItem(name) ? localStorage.getItem(name) : null);
  } else {
    throw new Error("Key not found");
  }
};

let set_JSON = (key, state) => {
  if (key && state) {
    return localStorage.setItem(key, JSON.stringify(state));
  } else {
    throw new Error("Key error");
  }
};

let set_plain = (key, state) => {
  if (key && state) {
    return localStorage.setItem(key, state);
  } else {
    throw new Error("Key error");
  }
};

module.exports = {
  get_JSON,
  get_plain,
  set_JSON,
  set_plain,
};
